<story-context id="portfolio2.0/docs/sprint-artifacts/5-2-dynamic-project-overlay-iframe-integration.context" v="1.0">
  <metadata>
    <epicId>5</epicId>
    <storyId>2</storyId>
    <title>Dynamic Project Overlay & Iframe Integration</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-11-21</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/stories/5-2-dynamic-project-overlay-iframe-integration.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>user</asA>
    <iWant>to see the full list of projects in the overlay and view them in an iframe</iWant>
    <soThat>I can explore Vansh's work without leaving the site and have the AI context switch accordingly</soThat>
    <tasks>
- [ ] Create Project Config (AC: 3)
  - [ ] Create `src/config/projects.ts`
  - [ ] Populate with data extracted from `brownfield/project-display.html` and `_content/projects`
  - [ ] Define type interface `Project`
- [ ] Update Sidebar Component (AC: 1)
  - [ ] Refactor `OverlaySidebar.tsx` to map over the config data
  - [ ] Implement category grouping
- [ ] Update Overlay Component (AC: 2)
  - [ ] Refactor `ProjectOverlay.tsx` to use `selectedProjectId` state
  - [ ] Ensure iframe `src` updates dynamically
  - [ ] Pass `projectId` to the chat trigger (preparation for Story 5.3)
    </tasks>
  </story>

  <acceptanceCriteria>
1.  **Given** the project overlay sidebar
    *   **When** I open it
    *   **Then** I see all projects categorized correctly (Product Design, Branding, etc.) as defined in the configuration.

2.  **Given** the project list
    *   **When** I click on a project
    *   **Then** the main view updates to show the correct iframe URL for that project.
    *   **And** the "Ask Ursa" button is associated with the selected project's ID.

3.  **Given** the project configuration
    *   **When** I inspect the code
    *   **Then** there is a central `projects.ts` config file containing all project metadata (id, title, category, url).
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/epics.md</path>
        <title>Epic Breakdown</title>
        <section>Story 5.2: Dynamic Project Overlay & Iframe Integration</section>
        <snippet>
As a user, I want to see the full list of projects in the overlay and view them in an iframe, so that I can explore Vansh's work without leaving the site.
        </snippet>
      </doc>
      <doc>
        <path>brownfield/project-display.html</path>
        <title>Project Display Reference</title>
        <section>Project Categories and Links</section>
        <snippet>
Categories: Product Design, Healthcare, E-Commerce, Enterprise, B2B SaaS, Academia, VR & Metaverse, Branding
Projects include: Aether, Vibio, DriQ Health, Sparto, Sparto Admin, Ovik Finance, Syno Vein, Synofin LMS, DIT University, Lalaverse
        </snippet>
      </doc>
    </docs>
    <code>
      <file>
        <path>vansh.fyi/src/components/overlays/ProjectOverlay.tsx</path>
        <description>Main project overlay component - currently hardcoded to Aether</description>
      </file>
      <file>
        <path>vansh.fyi/src/components/overlays/OverlaySidebar.tsx</path>
        <description>Sidebar component - needs to be refactored to render from config</description>
      </file>
      <file>
        <path>vansh.fyi/src/state/overlayStore.ts</path>
        <description>Zustand store - already has projectId support</description>
      </file>
    </code>
    <dependencies>
      <ecosystem name="node">
        <package name="zustand" version="^4.0.0" />
      </ecosystem>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>URL Pattern: https://vansh.fyi/projects/{category-slug}/{project-id}</constraint>
    <constraint>State Management: Use existing overlayStore with selectedProjectId</constraint>
    <constraint>Category List: Product Design, Healthcare, E-Commerce, Enterprise, B2B SaaS, Academia, VR & Metaverse, Branding</constraint>
  </constraints>

  <interfaces>
    <interface>
      <name>Project Config Structure</name>
      <kind>TypeScript Interface</kind>
      <signature>
export interface Project {
  id: string;
  title: string;
  subtitle: string;
  category: string;
  url: string;
}

export const projects: Project[] = [
  {
    id: 'aether',
    title: 'Aether',
    subtitle: 'AI Design System Generator',
    category: 'Product Design',
    url: 'https://vansh.fyi/projects/product-design/aether'
  },
  // ... more projects
];
      </signature>
      <path>vansh.fyi/src/config/projects.ts</path>
    </interface>
    <interface>
      <name>Overlay Store Extension</name>
      <kind>Zustand State</kind>
      <signature>
interface ViewStore {
  selectedProjectId?: string;
  setSelectedProject: (id: string) => void;
}
      </signature>
      <path>vansh.fyi/src/state/overlayStore.ts</path>
    </interface>
  </interfaces>

  <tests>
    <standards>
      Verify all projects from brownfield/project-display.html are included in config. Ensure category grouping matches original UI. Test iframe URL updates on project selection.
    </standards>
    <locations>
      <location>Manual browser testing</location>
    </locations>
    <ideas>
      <idea>Verify all categories render correctly</idea>
      <idea>Verify clicking a project updates iframe src</idea>
      <idea>Verify "Ask Ursa" button receives correct projectId</idea>
      <idea>Verify sidebar shows active project state</idea>
    </ideas>
  </tests>
</story-context>
