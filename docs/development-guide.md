# Development Guide: Portfolio Website

This document outlines the development setup and workflow for the Portfolio Website project.

## 1. Prerequisites

To work on this project, you need:
*   Node.js (v18+) and npm
*   A modern web browser (Chrome, Firefox, Edge, Safari)
*   A code editor (VS Code recommended)

## 2. Project Structure

The project has two main directories:
*   **`portfolio-react-template/`**: Modern React + TypeScript + Vite application (ACTIVE DEVELOPMENT)
*   **`brownfield/`**: Legacy static HTML/CSS/JS site (DEPRECATED - reference only)

### Active Development Structure (`portfolio-react-template/`)

```
portfolio-react-template/
├── src/
│   ├── components/          # React components (.tsx files)
│   │   ├── overlays/        # Overlay components
│   │   └── __tests__/       # Component tests
│   ├── state/               # Zustand stores (.ts files)
│   │   └── __tests__/       # Store tests
│   ├── App.tsx              # Main app component
│   ├── main.tsx             # Entry point
│   └── index.css            # Global styles
├── public/                  # Static assets
├── dist/                    # Build output (generated)
└── package.json
```

## 3. Local Development Setup

1.  **Clone the repository**:
    ```bash
    git clone [repository-url]
    cd portfolio2.0/portfolio-react-template
    ```

2.  **Install dependencies**:
    ```bash
    npm install
    ```

3.  **Start development server**:
    ```bash
    npm run dev
    ```
    Opens at `http://localhost:5173`

## 4. File Structure Conventions

### CRITICAL: TypeScript File Rules

**ALWAYS edit `.tsx` and `.ts` files. NEVER manually create or edit `.js` or `.d.ts` files.**

- **`.tsx`** = React components (source of truth)
- **`.ts`** = TypeScript modules (source of truth)
- **`.d.ts`** = Type declarations (AUTO-GENERATED by TypeScript, DO NOT EDIT)
- **`.js`** = Legacy JavaScript (SHOULD NOT EXIST in src/)

### Why This Matters

The project uses TypeScript's `emitDeclarationOnly` mode (see `tsconfig.app.json:13`), which automatically generates `.d.ts` files during build. If you manually create `.d.ts` files alongside `.tsx` files, TypeScript will error with:

```
error TS6305: Output file 'X.d.ts' has not been built from source file 'X.tsx'
```

**Solution**: Delete any manual `.d.ts` files. TypeScript will regenerate them automatically.

### Making Changes

- **Components**: Edit files in `src/components/*.tsx`
- **Stores**: Edit files in `src/state/*.ts`
- **Styles**: Edit `src/index.css` or component-level CSS
- **Tests**: Edit/create files in `__tests__/` directories

## 5. Build Process

```bash
# Development build with hot reload
npm run dev

# Production build
npm run build

# Preview production build
npm run preview

# Run tests
npm test

# Type checking
npm run type-check
```

Build output goes to `dist/` directory.

## 6. Running Tests

```bash
# Run all tests
npm test

# Run tests in watch mode
npm run test:watch

# Run tests with coverage
npm run test:coverage
```

Tests use Vitest + React Testing Library.

## 7. Common Development Tasks

*   **Adding a new component**: Create `ComponentName.tsx` in `src/components/`
*   **Adding a new store**: Create `storeName.ts` in `src/state/` using Zustand
*   **Updating styles**: Modify `src/index.css` (uses CSS custom properties for theming)
*   **Adding tests**: Create `ComponentName.test.tsx` in `__tests__/` directory
*   **Fixing TypeScript errors**: Run `npm run build` to see all type errors

## 8. Code Style and Conventions

*   **TypeScript**: Strict mode enabled, all files must type-check
*   **React**: Functional components with hooks
*   **State Management**: Zustand for global state
*   **Styling**: CSS custom properties + utility classes
*   **Testing**: Test user interactions, not implementation details
*   **File Naming**:
    - Components: `PascalCase.tsx`
    - Stores: `camelCase.ts`
    - Tests: `ComponentName.test.tsx`

## 9. Troubleshooting

### Build Errors After Deleting Files

If you see `TS6305` errors about output files:
```bash
rm -rf node_modules/.tmp
find . -name "*.tsbuildinfo" -delete
npm run build
```

### Type Errors

Clear TypeScript cache:
```bash
rm -f tsconfig.tsbuildinfo tsconfig.node.tsbuildinfo
npm run build
```

### Port Already in Use

Kill process on port 5173:
```bash
lsof -ti:5173 | xargs kill
```

## 10. Legacy Brownfield Site

The `brownfield/` directory contains the original static HTML site. It is kept for reference only. All new development happens in `portfolio-react-template/`.

**Do not make changes to brownfield/** unless specifically migrating functionality to the React app.
